# 项目初始化

申请小程序

添加为开发者

拉取空工程

修改基本配置

拉取依赖



# 通用组件

## 页面构建组件

司机端小程序开发的常用组件除了vant之外，还有一些自定组件

Card

CardButton

CardField

CardFooter

CardHeader

date-picker

empty

FooterButton

imageUpload

lov-picker

message

output

PageFooter

Step

## 列表页模板

小程序的常用页面类型。

![页面类型](https://handtms-static.obs.cn-east-3.myhuaweicloud.com/component/0/fdece428955c44f2b6631573487859f7%40%E6%97%A0%E6%A0%87%E9%A2%9815.png)

- 普通列表页 [页面模板](https://handtms-static.obs.cn-east-3.myhuaweicloud.com:443/component/0/4aae5bca8aa0463bad401bf5d0a3ed1c@simpleList.rar)
- 普通 tab 列表页 [页面模板](https://handtms-static.obs.cn-east-3.myhuaweicloud.com:443/component/0/c36c23c66a804effac3335080c7b6ef0@simpleTapsList.rar)
- 带搜索的 tab 列表页 [页面模板](https://handtms-static.obs.cn-east-3.myhuaweicloud.com:443/component/0/1984379e3730412fb4aaa0a69ed4e7fa@searchSimpleTapsList.rar)
- 带搜索的列表页 [页面模板](https://handtms-static.obs.cn-east-3.myhuaweicloud.com:443/component/0/c20c77f2b4d74a56b2d124925487c35f@searchSimpleList.rar)
- 表单页

### 使用模板页面开发需要以下三个步骤 

1.选择适合的模板放入小程序

普通列表页 [页面模板](https://handtms-static.obs.cn-east-3.myhuaweicloud.com:443/component/0/4aae5bca8aa0463bad401bf5d0a3ed1c@simpleList.rar)

如果此时没有在TMS运输管理系统维护子应用，我们可以使用小程序开发工具的本地编译，编译特定页面。

首先在app.json将页面路径写入页面配置（示例放入了page,如果是客户自定义页面，则放入subpackages）,另外暂时注释调app.js的强制路由跳转代码（因为每次启动小程序首先会执行app.js,如果不注释调跳转，会使本地编译的页面无法达到）。



![](https://handtms-static.obs.cn-east-3.myhuaweicloud.com/component/0/9390ff374b6d4399a506dec0f3c5dc7d%40%E6%97%A0%E6%A0%87%E9%A2%9825.png)



然后，设置本地编译模式，填写页面路由，编译页面。调试完成后，恢复app.js注释的代码

![](https://handtms-static.obs.cn-east-3.myhuaweicloud.com/component/0/4d8136ab52b8450294c16f6abf4b2b18%40%E6%97%A0%E6%A0%87%E9%A2%9824.png)



![](https://handtms-static.obs.cn-east-3.myhuaweicloud.com/component/0/080a161dbda24281b1380942e11723d3%40%E6%97%A0%E6%A0%87%E9%A2%9826.png)



![](https://handtms-static.obs.cn-east-3.myhuaweicloud.com/component/0/e3dfbdfcee474dce8fefe4b36c6de9b9%40%E6%97%A0%E6%A0%87%E9%A2%9827.png)



2.修改数据源

确认页面import路径正确，并且修改请求路径，如下图所示（注意：所有请求地址写在common/http文件中）

![页面js](https://handtms-static.obs.cn-east-3.myhuaweicloud.com/component/0/8e69366cc2d5499bb49eaec71f61b9d3%40%E6%97%A0%E6%A0%87%E9%A2%9822.png)



3.修改页面内容

修改页面中卡片的内容，包扩CardHeader,CardFooter,以及`<view slot="mid">`

![](https://handtms-static.obs.cn-east-3.myhuaweicloud.com/component/0/8c5884e1e9e3485abb15dcb3a0d8283d%40%E6%97%A0%E6%A0%87%E9%A2%9823.png)



![](https://handtms-static.obs.cn-east-3.myhuaweicloud.com/component/0/e3dfbdfcee474dce8fefe4b36c6de9b9%40%E6%97%A0%E6%A0%87%E9%A2%9827.png)

# 通用方法

## util

promisify

wrapRequest

request

mergeObj

getDataSet

getMacroMsg

goback

showWxMsg

getParent

formatTime,

getDateTime,

getTimepiece

isPhone

debounce

setManyGlobal

getGlobalData

## extraFeat

getAddress

getLocation

getlookUpCode

getLov

macroRequest

getSubAppParameterByCode

bdgcj2String