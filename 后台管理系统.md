## 后台管理系统

### 项目描述

* 此项目为一个前后台分离的后台管理的SPA, 包括前端PC应用和后端应用
* 包括用户管理 / 商品分类管理 / 商品管理 / 权限管理等功能模块
* 前端: 使用React全家桶 + Antd + Axios + ES6+ + Webpack等技术
* 后端: 使用Node + Express + Mongodb等技术
*  采用模块化、组件化、工程化的模式开发



### 技术选型

##### 前台数据展现/交互/组件化

* react
* react-router-dom
* antd
* redux



##### 后台应用

* node
* mongodb
* mongoose
* multer
* blueimp-md5



##### 前后台交互

* ajax请求
  * axios
  * jsonp
  * promise/async/await
* 接口测试工具
  * postman

模块化

* ES6
* CommonJS



项目构建工具/工程化

* webpack
* create-react-app
* eslint

其他

* 富文本编辑器
  * react-draft-wysiwyg
  * draft-js
  * draftjs-to-html
* 图表库
  * echarts
  * echarts-for-react



### API/接口

一个前后端分离项目的API接口包括四个部分

* 请求URL
* 请求方式
* 参数类型
* 返回值



##### 重要概念

* API(接口)
* 接口文档
  * API接口的文档

* 测试接口
  * 前端对照接口文档，测试接口功能
* 对接口
  * 前后端对某个功能的API对接
* 调接口
  * 使用接口
* 联调
  * 前后台写好的代码一起使用
* 前后台分离
  * 面向API文档开发

* mock（模拟）数据



### 搭建环境

1. 安装create-react-app

   `npm install -g create-react-app` 全局下载工具

2. 创建项目 

   `npx create-react-app myApp`

3. 测试

   开发环境测试

   `npm start` 或者 `yarn start`

   访问一下页面

   

   生产环境测试

   打包`npm run build`

   安装生产服务器软件 ` npm install -g serve`

   启动服务器 `server build`

   或者

   打包`yarn build`

   安装生产服务器软件 `yarn global add serve`

   启动服务器

   `serve -s build`

   

   三个入口

   > 页面入口 index.html

   根标签  `<div id="root"></div>`

   

   > js入口 index.js

   ```javascript
   import React from 'react'
   import ReactDOM from 'react-dom'
   
   import App from './App'
   
   ReactDOM.render(<App />, document.getElementById('root'))
   ```

   

   > 组件入口 App.jsx

   ```javascript
   import React, {Component} from 'react'
   /*
   应用根组件
    */
   class App extends Component {
     render() {
       return (
         <div>App</div>
       )
     }
   }
   
   export default App
   ```



#### 使用antd组件库

[antd文档](https://ant.design/docs/react/introduce-cn)

`yarn add antd`

#### 如何按需加载需要的css样式

##### 1. 下载依赖模块
```shell
	npm install --save-dev react-app-rewired customize-cra babel-plugin-import
	npm install --save-dev less less-loader
	
	或者
	yarn add react-app-rewired customize-cra babel-plugin-import
	yarn add less less-loader
```

##### 2. 添加配置:  config-overrides.js
```javascript
const { override, fixBabelImports, addLessLoader } = require('customize-cra');

module.exports = override(
  // 配置babel-plugin-import: 
  fixBabelImports('import', {
    libraryName: 'antd', // 针对antd进行按需打包
    libraryDirectory: 'es', // 去es文件夹对应的组件进行打包
    // style: 'css',  // 自动打包组件对应的css样式
    style: true,  // 加载less进行重新编译打包
  }),

  // 添加less的配置
  addLessLoader({
    javascriptEnabled: true,
    modifyVars: { '@primary-color': '#1DA57A' }, // 指定主体颜色为绿色
  }),
);
```
##### 3. 修改配置: package.json
```json
	"scripts": {
		"start": "react-app-rewired start",
		"build": "react-app-rewired build",
		"test": "react-app-rewired test",
		"eject": "react-scripts eject"
	}
```
##### 4. 去除样式引入
```javascript
// import 'antd/dist/antd.css'; 
```



#### 安装路由插件

[react-router-dom中文文档](https://react-router.docschina.org/web/guides/quick-start)

安装

`npm install react-router-dom`

或者

`yarn add react-router-dom`



